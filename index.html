<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeetApp - –í–∏–¥–µ–æ-—á–∞—Ç —Å –¥—Ä—É–∑—å—è–º–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
        }

        .logo-icon {
            background: #4CAF50;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
            margin-top: 30px;
        }

        .video-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            flex-grow: 1;
        }

        .video-item {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            aspect-ratio: 4/3;
            position: relative;
            overflow: hidden;
        }

        .video-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-name {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .control-btn.end-call {
            background: #f44336;
        }

        .control-btn.end-call:hover {
            background: #d32f2f;
        }

        .control-btn.active {
            background: #4CAF50;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
        }

        .panel h2 {
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .invite-section {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .invite-input {
            flex-grow: 1;
            padding: 10px;
            border-radius: 5px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #45a049;
        }

        .participants-list {
            list-style: none;
        }

        .participant {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.1);
        }

        .participant-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #2196F3;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .chat-messages {
            height: 300px;
            overflow-y: auto;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            padding: 10px;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .message.own {
            background: rgba(76, 175, 80, 0.3);
            align-self: flex-end;
        }

        .message.other {
            background: rgba(33, 150, 243, 0.3);
            align-self: flex-start;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex-grow: 1;
            padding: 10px;
            border-radius: 5px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            color: #4CAF50;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #4CAF50;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .video-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">üìπ</div>
                <span>MeetApp</span>
            </div>
            <div class="status">
                <div class="status-dot"></div>
                <span>–ü–æ–¥–∫–ª—é—á–µ–Ω–æ</span>
            </div>
        </header>

        <div class="main-content">
            <div class="video-container">
                <div class="video-grid">
                    <div class="video-item">
                        <video id="localVideo" autoplay muted></video>
                        <div class="user-name">–í—ã</div>
                    </div>
                    <div class="video-item">
                        <div class="user-name">–î—Ä—É–≥ 1</div>
                    </div>
                    <div class="video-item">
                        <div class="user-name">–î—Ä—É–≥ 2</div>
                    </div>
                    <div class="video-item">
                        <div class="user-name">–î—Ä—É–≥ 3</div>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="control-btn" id="micToggle" title="–ú–∏–∫—Ä–æ—Ñ–æ–Ω">
                        üé§
                    </button>
                    <button class="control-btn" id="cameraToggle" title="–ö–∞–º–µ—Ä–∞">
                        üìπ
                    </button>
                    <button class="control-btn" id="screenShare" title="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞">
                        üñ•Ô∏è
                    </button>
                    <button class="control-btn end-call" id="endCall" title="–ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫">
                        üìû
                    </button>
                </div>
            </div>

            <div class="sidebar">
                <div class="panel">
                    <h2>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</h2>
                    <div class="invite-section">
                        <input type="text" class="invite-input" placeholder="–°—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è" value="meetapp.com/room/abc123" readonly>
                        <button class="btn" id="copyLink">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <ul class="participants-list">
                        <li class="participant">
                            <div class="participant-avatar">–í</div>
                            <div>–í—ã</div>
                        </li>
                        <li class="participant">
                            <div class="participant-avatar">–ê</div>
                            <div>–ê–ª–µ–∫—Å–µ–π</div>
                        </li>
                        <li class="participant">
                            <div class="participant-avatar">–ú</div>
                            <div>–ú–∞—Ä–∏—è</div>
                        </li>
                        <li class="participant">
                            <div class="participant-avatar">–ò</div>
                            <div>–ò–≤–∞–Ω</div>
                        </li>
                    </ul>
                </div>

                <div class="panel">
                    <h2>üí¨ –ß–∞—Ç</h2>
                    <div class="chat-messages" id="chatMessages">
                        <div class="message other">
                            <strong>–ê–ª–µ–∫—Å–µ–π:</strong> –ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!
                        </div>
                        <div class="message other">
                            <strong>–ú–∞—Ä–∏—è:</strong> –ö–∞–∫ –¥–µ–ª–∞?
                        </div>
                        <div class="message own">
                            <strong>–í—ã:</strong> –í—Å–µ–º –ø—Ä–∏–≤–µ—Ç! –£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                        <button class="btn" id="sendMessage">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>MeetApp &copy; 2023 | –í–∏–¥–µ–æ-—á–∞—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –¥—Ä—É–∑—å—è–º–∏</p>
        </footer>
    </div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
        const micToggle = document.getElementById('micToggle');
        const cameraToggle = document.getElementById('cameraToggle');
        const screenShare = document.getElementById('screenShare');
        const endCall = document.getElementById('endCall');
        const copyLink = document.getElementById('copyLink');
        const messageInput = document.getElementById('messageInput');
        const sendMessage = document.getElementById('sendMessage');
        const chatMessages = document.getElementById('chatMessages');
        const localVideo = document.getElementById('localVideo');

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let isMicOn = true;
        let isCameraOn = true;
        let isScreenSharing = false;

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
        micToggle.addEventListener('click', () => {
            isMicOn = !isMicOn;
            micToggle.style.background = isMicOn ? 'rgba(255, 255, 255, 0.1)' : '#f44336';
            console.log(`–ú–∏–∫—Ä–æ—Ñ–æ–Ω ${isMicOn ? '–≤–∫–ª—é—á–µ–Ω' : '–≤—ã–∫–ª—é—á–µ–Ω'}`);
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
        cameraToggle.addEventListener('click', () => {
            isCameraOn = !isCameraOn;
            cameraToggle.style.background = isCameraOn ? 'rgba(255, 255, 255, 0.1)' : '#f44336';
            console.log(`–ö–∞–º–µ—Ä–∞ ${isCameraOn ? '–≤–∫–ª—é—á–µ–Ω–∞' : '–≤—ã–∫–ª—é—á–µ–Ω–∞'}`);
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–¥ –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞
            if (localVideo.srcObject) {
                localVideo.srcObject.getVideoTracks()[0].enabled = isCameraOn;
            }
        });

        // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞
        screenShare.addEventListener('click', async () => {
            if (!isScreenSharing) {
                try {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Ä–∞–Ω—É
                    const stream = await navigator.mediaDevices.getDisplayMedia({ video: true });
                    localVideo.srcObject = stream;
                    isScreenSharing = true;
                    screenShare.classList.add('active');
                    console.log('–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ –Ω–∞—á–∞—Ç–∞');
                    
                    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞
                    stream.getVideoTracks()[0].onended = () => {
                        isScreenSharing = false;
                        screenShare.classList.remove('active');
                        // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—ã—á–Ω–æ–π –∫–∞–º–µ—Ä–µ
                        if (isCameraOn) {
                            startCamera();
                        }
                    };
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —ç–∫—Ä–∞–Ω–∞:', error);
                }
            } else {
                // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é —ç–∫—Ä–∞–Ω–∞
                if (localVideo.srcObject) {
                    localVideo.srcObject.getTracks().forEach(track => track.stop());
                }
                isScreenSharing = false;
                screenShare.classList.remove('active');
                
                // –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—ã—á–Ω–æ–π –∫–∞–º–µ—Ä–µ
                if (isCameraOn) {
                    startCamera();
                }
            }
        });

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
        endCall.addEventListener('click', () => {
            if (confirm('–ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–≤–æ–Ω–æ–∫?')) {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–¥ –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
                if (localVideo.srcObject) {
                    localVideo.srcObject.getTracks().forEach(track => track.stop());
                }
                window.location.href = '#';
                console.log('–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω');
            }
        });

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
        copyLink.addEventListener('click', () => {
            const inviteInput = document.querySelector('.invite-input');
            inviteInput.select();
            document.execCommand('copy');
            alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
        });

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
        sendMessage.addEventListener('click', sendChatMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendChatMessage();
            }
        });

        function sendChatMessage() {
            const message = messageInput.value.trim();
            if (message) {
                const messageElement = document.createElement('div');
                messageElement.className = 'message own';
                messageElement.innerHTML = `<strong>–í—ã:</strong> ${message}`;
                chatMessages.appendChild(messageElement);
                messageInput.value = '';
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                console.log(`–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${message}`);
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
                setTimeout(() => {
                    const responses = [
                        "–û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è!",
                        "–°–æ–≥–ª–∞—Å–µ–Ω —Å —Ç–æ–±–æ–π",
                        "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, —Ä–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ",
                        "–Ø —Ç–æ–∂–µ —Ç–∞–∫ –¥—É–º–∞—é"
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    
                    const responseElement = document.createElement('div');
                    responseElement.className = 'message other';
                    responseElement.innerHTML = `<strong>–ê–ª–µ–∫—Å–µ–π:</strong> ${randomResponse}`;
                    chatMessages.appendChild(responseElement);
                    
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000 + Math.random() * 2000);
            }
        }

        // –ó–∞–ø—É—Å–∫ –∫–∞–º–µ—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        async function startCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                localVideo.srcObject = stream;
                console.log('–ö–∞–º–µ—Ä–∞ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ/–º–∏–∫—Ä–æ—Ñ–æ–Ω—É:', error);
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ –∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', startCamera);
    </script>
</body>
</html>
